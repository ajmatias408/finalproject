function executeQuery() {
  $('#results').hide();
  $('tbody').empty();
  var inputToString = $('#search-form').serialize();
  console.log(inputToString);

  $.ajax({
    url: 'searchquery.cgi',
    dataType: 'json',
    data: inputToString,
    success: function (data, jqXHR) {
      executeJSON(data);
    },
    error: function (jqXHR, errorThrown) {
      alert("Unable to find disease.");
    }
  });
}

function executeJSON(data) {
  $('#count').text(data.count);
  var next_row_num = 1;
  $.each(data.values, function (i, item) {
    var this_row_id = 'resultrow' + next_row_num++;
    $('<tr/>', { id: this_row_id }).appendTo('tbody');
    $('<td/>', { text: item.SpeciesName }).appendTo('#' + this_row_id);
    $('<td/>', { text: item.DOtermName }).appendTo('#' + this_row_id);
  });
  $('#results').show();
}

$(document).ready(function () {
  $('#submit').click(function () {
    executeQuery();
    return false;
  });
});
